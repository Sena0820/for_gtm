<!DOCTYPE html>
<html>
<head>
<meta name="referrer" content="no-referrer-when-downgrade"/>
<title>SPA Sample for GTM</title>
<link rel="stylesheet" href="styles.css">
<script>
  // dataLayerãŒæœªå®šç¾©ãªã‚‰åˆæœŸåŒ–
// dataLayerã¨gtagé–¢æ•°ã‚’å®šç¾©
  window.dataLayer = window.dataLayer || [];

  // 5æ¡ã®ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°å­—ã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°
  function generateUserId() {
      return Math.floor(10000 + Math.random() * 90000); // 10000ã€œ99999
  }

  // user-id ã‚’ dataLayer ã« push
  window.dataLayer.push({
      'event': 'userData',
      'user_id': generateUserId()
  });
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-analytics.js";
  import {
    getRemoteConfig,
    fetchAndActivate,
    getValue
  } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-remote-config.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBLA_WKcFzBQF8-goDOKcA3OFS1lCYVOM8",
    authDomain: "abtest-project-3aa77.firebaseapp.com",
    projectId: "abtest-project-3aa77",
    storageBucket: "abtest-project-3aa77.firebasestorage.app",
    messagingSenderId: "763049938588",
    appId: "1:763049938588:web:30db6e68aee30e46e2a759",
    measurementId: "G-5D67P5C535"
  };

  const app = initializeApp(firebaseConfig);
  getAnalytics(app);

  const rc = getRemoteConfig(app);

  // ğŸ”´ Firebase A/B Testing ã§ä½¿ã£ã¦ã„ã‚‹ã‚­ãƒ¼ã¨å¿…ãšä¸€è‡´ã•ã›ã‚‹
  rc.defaultConfig = {
    testText: "normal"
  };

  // é–‹ç™ºä¸­ã¯å³åæ˜ 
  rc.settings.minimumFetchIntervalMillis = 0;

  await fetchAndActivate(rc);

  const variantText = getValue(rc, "testText").asString();
  console.log("varianttext",variantText);

  // CTAåæ˜ 
  document.querySelector("#cta").textContent = variantText;

  // GTM ç”¨ã« variant ã‚’å¸¸é§ã•ã›ã‚‹
  window.dataLayer = window.dataLayer || [];
  window.dataLayer.push({
    ab_variant: variantText,
    event: "ab_variant_ready"
  });
</script>
  <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WVLZP8WV');</script>
<!-- End Google Tag Manager -->
</head>
<body>
<a href ="sample.html">hogheoge</a>
<div id = "false">
  <p class = "a-class">aaaaaaa</p>
  <p class = "b-class">bbbbbbb</p>
  <img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="Google Logo" width="272">
</div>
<nav id="tabs">
  <button id="tab1">Google</button>
  <button id="tab2">Wikipedia</button>
  <button id="tab3">Youtube</button>
  <button id="tab4">Twitter</button>
  <button id="tab5">Amazon</button>
</nav>

<div id="content">
  <div id="content1" class="tab-content active">
    <h1>Google Content</h1>
    <p>This is the content for tab 1.</p>
      <p>ä¾‹2: Googleã®ãƒ­ã‚´</p>
  <img src="https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png" alt="Google Logo" width="272">
  </div>
  <div id="content2" class="tab-content">
    <h1>Wikipedia Content</h1>
    <p>This is the content for tab 2.</p>
     <p>ä¾‹1: Wikipediaã®ç”»åƒ</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f5/Wikipedia_Logo_new.svg/2560px-Wikipedia_Logo_new.svg.png" alt="Wikipedia Logo" width="200">
  </div>
  <div id="content3" class="tab-content">
    <h1>Youtube Content</h1>
    <p>This is the content for tab 3.</p>
    <p>ä¾‹3: YouTubeã®ãƒ­ã‚´</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b8/YouTube_Logo_2017.svg/2560px-YouTube_Logo_2017.svg.png" alt="YouTube Logo" width="300">
  </div>
  <div id="content4" class="tab-content">
    <h1>Twitter Content</h1>
    <p>This is the content for tab 4.</p>
      <p>ä¾‹4: Twitterã®ãƒ­ã‚´</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/X_logo_2023.svg/2048px-X_logo_2023.svg.png" alt="Twitter Logo" width="200">
  </div>
  <div id="content5" class="tab-content">
    <h1>Amazon Content</h1>
    <p>This is the content for tab 5.</p>
    <p>ä¾‹5: Amazonã®ãƒ­ã‚´</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/2560px-Amazon_logo.svg.png" alt="Amazon Logo" width="250">
  </div>
</div>
<div id="testID">ã“ã‚Œã¯testã§ã™</button>
<script src="scripts.js"></script>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WVLZP8WV"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->


<a href ="sample.html">fugagufa</a>

<button id="cta">Loading...</button>



</body>
</html>
